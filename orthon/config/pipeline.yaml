# Orthon Pipeline Configuration
# ==============================
# Settings for the full analysis pipeline

version: "1.0.0"

# =============================================================================
# WINDOWING
# =============================================================================
# Rolling window settings for time series analysis

windowing:
  default:
    window_size: 252
    stride: 21
    min_observations: 50

  adaptive:
    enabled: false
    min_window: 20
    max_window: 500
    target_windows: 10


# =============================================================================
# DATA PATHS
# =============================================================================
# Standard parquet file names

paths:
  observations: "observations.parquet"
  vector: "vector.parquet"
  geometry: "geometry.parquet"
  state: "state.parquet"
  cohorts: "cohorts.parquet"
  ml_features: "ml_features.parquet"
  ml_results: "ml_results.parquet"


# =============================================================================
# PIPELINE STAGES
# =============================================================================
# Which stages to run and in what order

stages:
  - name: vector
    enabled: true
    depends_on: [observations]
    output: vector.parquet

  - name: geometry
    enabled: true
    depends_on: [vector]
    output: geometry.parquet

  - name: state
    enabled: true
    depends_on: [geometry]
    output: state.parquet

  - name: cohort
    enabled: true
    depends_on: [vector, geometry, state]
    output: cohorts.parquet

  - name: ml_features
    enabled: false
    depends_on: [vector, geometry, state, cohort]
    output: ml_features.parquet

  - name: ml_train
    enabled: false
    depends_on: [ml_features]
    output: ml_results.parquet


# =============================================================================
# PARALLELIZATION
# =============================================================================
# Multi-processing settings

parallel:
  enabled: true
  n_workers: -1          # -1 = use all CPUs
  chunk_size: 1000       # Rows per chunk


# =============================================================================
# LOGGING
# =============================================================================
# Logging and progress tracking

logging:
  level: INFO
  format: "%(asctime)s - %(levelname)s - %(name)s - %(message)s"
  progress_bar: true


# =============================================================================
# CACHING
# =============================================================================
# Intermediate result caching

caching:
  enabled: true
  directory: ".orthon_cache"
  max_age_hours: 24
